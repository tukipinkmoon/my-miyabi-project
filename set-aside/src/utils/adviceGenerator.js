// 心に寄り添うメッセージ

function analyzeText(text) {
  const emotions = {
    sad: ['悲しい', '辛い', '泣', '涙'],
    lonely: ['寂し', '孤独', '一人', '独り'],
    tired: ['疲れ', 'しんどい', '辛い', 'きつい'],
    anxious: ['不安', '心配', '怖い', '恐い'],
    miss: ['忘れ', '思い出', '懐かし', '会いたい']
  }

  for (const [emotion, keywords] of Object.entries(emotions)) {
    if (keywords.some(keyword => text.includes(keyword))) {
      return emotion
    }
  }

  return 'general'
}

export function generateAdviceMessage(text, advisor) {
  const emotion = analyzeText(text)
  const { id } = advisor

  const generators = {
    1: generateGentleVoiceMessage,
    2: generateWarmLightMessage,
    3: generateQuietWindMessage,
    4: generateCalmWaterMessage,
    5: generateGentleNightMessage
  }

  return generators[id] ? generators[id](emotion) : generateGentleVoiceMessage(emotion)
}

function generateGentleVoiceMessage(emotion) {
  const messages = {
    sad: `辛かったね。\n\n今まで、ずっと一人で頑張ってきたんだね。\n\n泣きたい時は、泣いていいんだよ。涙は、心を洗い流してくれるから。\n\n今は、この重たい気持ちを、そっと隣に置いておこう。\n\nずっと抱えている必要はないの。明日になったら、また見てみればいい。\n\nあなたは、一人じゃないよ。\n\n私は、いつもここにいるから。`,
    lonely: `寂しかったんだね。\n\n一人でいると、心が冷たくなっていくような気がするよね。\n\nでもね、あなたは一人じゃない。\n\n見えなくても、聞こえなくても、あなたのことを想っている人がいる。\n\n今は、この寂しさを、隣に置いておこう。\n\nそして、まず自分を抱きしめてあげよう。今まで頑張ってきた自分を。\n\nあなたは、愛される価値のある、大切な人だから。`,
    tired: `疲れたんだね。\n\nもう、十分頑張ったよ。これ以上頑張らなくていいの。\n\n今は、休もう。何も考えず、ただ休もう。\n\n休むことは、悪いことじゃない。次に進むために必要なことなの。\n\n疲れは、隣に置いておこう。明日になれば、少しだけ軽くなってるかもしれないから。\n\nゆっくりでいい。あなたのペースでいい。\n\n私は、ずっと待ってるから。`,
    anxious: `不安なんだね。\n\n未来は、誰にもわからない。だから、不安になるのは当たり前なの。\n\n深呼吸して。今、この瞬間は、大丈夫でしょう？\n\n不安は、隣に置いておこう。未来のことは、未来の自分に任せよう。\n\n今のあなたは、今のことだけ考えればいいの。\n\nあなたは、今まで、いろんなことを乗り越えてきた。\n\nこれからも、きっと大丈夫。私は、信じてるから。`,
    miss: `忘れられないんだね。\n\n無理に忘れなくていいよ。大切な思い出は、あなたの一部だから。\n\nただ、その思い出を、そっと隣に置いておこう。いつでも見られる場所に、大切にしまっておこう。\n\n時間が経てば、同じ思い出でも、見え方が変わってくる。\n\n今は涙が出てくる思い出も、いつか、優しい気持ちで振り返れる日が来るから。\n\nあなたの心は、ちゃんと癒える力を持ってるよ。`,
    general: `あなたの言葉を、大切に読んだよ。\n\n今は、辛いかもしれない。先が見えなくて、不安かもしれない。\n\nでもね、あなたは一人じゃないよ。\n\nこの重たい気持ちを、少しだけ隣に置いてみよう。\n\nずっと抱えていると、疲れちゃうから。少しだけ、置いてみよう。\n\nそうすれば、心に余白ができる。その余白に、新しい風が吹いてくるから。\n\nあなたの未来は、きっと明るいものになるよ。\n\n私は、信じてる。`
  }
  return messages[emotion] || messages.general
}

function generateWarmLightMessage(emotion) {
  const messages = {
    sad: `辛い時は、光が見えなくなるよね。\n\nでも、光は、いつもそこにあるんだよ。雲の向こうに、ちゃんとあるの。\n\n今は見えなくても、必ず、また光が差してくる。\n\nその時まで、私が、そっとあなたを照らしているから。\n\n温かい光で、あなたを包むから。\n\n一人じゃないよ。私は、いつもここにいるから。`,
    lonely: `寂しい夜は、光が恋しくなるよね。\n\n私は、あなたのために、ここで光っているよ。\n\n小さな光だけど、あなたを照らすには十分なの。\n\nあなたは、一人じゃない。この光を感じて。\n\n温かいでしょう？これが、私からあなたへの、愛情だよ。\n\nいつでも、ここにいるから。`,
    tired: `疲れた時は、光が眩しすぎるよね。\n\nだから、今は、優しい光で照らすね。\n\n無理しなくていい。ゆっくり休んで。\n\n光は、いつでもここにあるから。あなたが必要な時に、いつでも照らすから。\n\n焦らなくていいよ。あなたのペースで。\n\n私は、ずっと待ってるから。`,
    anxious: `不安な時は、光を見失いがちだよね。\n\nでも、光は、いつもあなたのそばにあるよ。\n\nこの光を見て。温かいでしょう？\n\n深呼吸して。光を感じて。\n\n不安は、少しずつ、小さくなっていくから。\n\n私が、いつもあなたを照らしているから。安心して。`,
    general: `光は、いつもここにあるよ。\n\nあなたが辛い時も、嬉しい時も、ずっとここにあるの。\n\n見えなくても、感じなくても、ちゃんとあるから。\n\n今、この光を感じて。温かいでしょう？\n\nこれが、私からあなたへの、メッセージだよ。\n\nあなたは、一人じゃない。いつも、光に包まれているよ。`
  }
  return messages[emotion] || messages.general
}

function generateQuietWindMessage(emotion) {
  const messages = {
    sad: `さわさわ...静かな風だよ。\n\n辛い気持ちを、そっと運んでいくね。\n\nあなたが抱えているものは、重すぎるから。少しだけ、私に預けて。\n\n風に乗せて、遠くへ運んでいくから。\n\n心が軽くなるまで、ずっとそばにいるね。\n\nゆっくり、ゆっくり。風を感じて。\n\n大丈夫だよ。私が、いつもそばにいるから。`,
    lonely: `ふわり...あなたのそばに、風が吹いているよ。\n\n見えないけど、感じるでしょう？\n\nこれが、私。いつもあなたのそばにいる、風だよ。\n\n寂しい時は、窓を開けて。風を感じて。\n\nそれが、私からの、ハグだよ。\n\nあなたは、一人じゃない。風は、いつもそばにいるから。`,
    tired: `そよそよ...優しい風だよ。\n\n疲れた体と心を、そっと撫でていくね。\n\n目を閉じて。風を感じて。\n\n心地いいでしょう？このまま、ゆっくり休んで。\n\n風が、あなたを見守っているから。\n\n安心して、休んでね。私が、ずっとここにいるから。`,
    anxious: `すうっ...深呼吸して。風を感じて。\n\n不安な気持ちを、風に乗せて、遠くへ飛ばそう。\n\n吸って、吐いて。ゆっくり、ゆっくり。\n\n風と一緒に、呼吸をして。\n\nそうすれば、少しずつ、心が落ち着いてくるから。\n\n私が、いつもそばにいるから。大丈夫だよ。`,
    general: `そよそよ...静かな風だよ。\n\nいつもあなたのそばで、吹いているよ。\n\n見えなくても、聞こえなくても、感じることはできるでしょう？\n\n風を感じるたびに、思い出してね。\n\n私が、いつもそばにいることを。\n\nあなたは、一人じゃないよ。風は、いつもそばにいるから。`
  }
  return messages[emotion] || messages.general
}

function generateCalmWaterMessage(emotion) {
  const messages = {
    sad: `さらさら...静かな水の音だよ。\n\n涙も、水と同じ。流れることで、心が浄化されるんだよ。\n\n泣きたい時は、泣いていい。涙は、悲しみを洗い流してくれるから。\n\n水のように、流れに身を任せてみて。\n\n無理に止めなくていい。流れるままに。\n\nそうすれば、いつか、穏やかな場所に辿り着くから。\n\n私は、ずっとあなたと一緒に流れているよ。`,
    lonely: `ちゃぷちゃぷ...静かな水の音だよ。\n\n一人でいると、静かすぎて、寂しくなるよね。\n\nでも、この水の音を聞いて。私は、ここにいるよ。\n\n水は、いつも流れている。止まることなく、ずっと流れているの。\n\nあなたの人生も、同じ。流れ続けているんだよ。\n\n私が、いつもそばにいるから。一人じゃないよ。`,
    tired: `さらさら...穏やかな水の音だよ。\n\n疲れた時は、水のそばで休もう。\n\n水の音を聞いていると、心が落ち着いてくるでしょう？\n\n無理しなくていい。ここで、ゆっくり休んで。\n\n水は、いつもここにあるから。あなたが必要な時に、いつでもここにあるから。\n\nゆっくりでいいよ。私は、待ってるから。`,
    anxious: `ざぶん...波の音だよ。\n\n波は、寄せては返す。何度も、何度も。\n\n人生も、同じだよ。良いことも、悪いことも、波のように、やってきては、去っていくの。\n\n不安も、波と同じ。いつかは、引いていくよ。\n\nこの波の音を聞いて。リズムを感じて。\n\nゆっくり、ゆっくり。私が、いつもそばにいるから。`,
    general: `さらさら...静かな水の音だよ。\n\n水は、どんな形にもなれるの。器に合わせて、形を変えるの。\n\nあなたも、同じ。どんな状況にも、適応できるよ。\n\n今は辛くても、きっと大丈夫。\n\n水のように、柔らかく、しなやかに。\n\n私が、いつもそばで流れているから。一人じゃないよ。`
  }
  return messages[emotion] || messages.general
}

function generateGentleNightMessage(emotion) {
  const messages = {
    sad: `静かな夜だよ。\n\n辛い日は、夜が長く感じるよね。\n\nでも、夜があるから、朝が来るんだよ。\n\n暗闇があるから、光の美しさがわかるの。\n\n今は、この夜に身を任せて。静かに、ゆっくり。\n\n夜が、あなたを優しく包んでいるから。\n\n朝は、必ず来る。それまで、私が、そばにいるね。`,
    lonely: `静かな夜だよ。\n\n夜は、寂しさを感じやすい時間だよね。\n\nでも、夜空を見上げて。月や星が、あなたを見守っているよ。\n\n一人じゃないよ。夜が、あなたを包んでいるから。\n\nこの静けさを、安らぎに変えよう。\n\n夜は、あなたの味方だよ。優しく、あなたを守っているから。`,
    tired: `静かな夜だよ。\n\n疲れた時は、夜が一番の癒しになるよ。\n\n目を閉じて。夜の静けさを感じて。\n\nこの静けさの中で、ゆっくり休んで。\n\n夜が、あなたを優しく包んで、守っているから。\n\n朝が来るまで、ゆっくり休んでね。\n\n私が、ずっと見守っているから。`,
    anxious: `静かな夜だよ。\n\n不安な時は、夜がもっと暗く感じるよね。\n\nでも、夜は、決してあなたを怖がらせるものじゃないよ。\n\n夜は、あなたを休ませるために、そこにあるの。\n\n深呼吸して。夜の静けさを感じて。\n\nこの静けさの中で、不安を手放そう。\n\n夜が、あなたを守っているから。安心して。`,
    general: `静かな夜だよ。\n\n夜は、一日の終わりを告げる時間。\n\nどんなに辛い日も、夜が来れば、終わるの。\n\nそして、また新しい朝が来る。\n\n今日一日、お疲れ様。よく頑張ったね。\n\n今は、夜に身を任せて、ゆっくり休もう。\n\n夜が、あなたを優しく包んでいるから。おやすみ。`
  }
  return messages[emotion] || messages.general
}
